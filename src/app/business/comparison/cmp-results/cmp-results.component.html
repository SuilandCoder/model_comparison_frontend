<div id='root-container' *ngIf='cmpTask' class='container' #cmpRst (scroll)='onScroll($event)'>
    <div class='bg'>
        <div></div>
    </div>
    <div class='content flex-box-col-nowrap'>
        <div>
            <div id='article-title'>
                <h1>{{cmpTask.meta.name}}</h1>
            </div>
        </div>
        <div nz-row>
            <div nz-col [nzSpan]='20' class='main-content'>
                <div id='cmp-rst-basic'>
                    <div class='section-header'>
                        <h2><span>Basic Information</span></h2>
                    </div>
                    <div class='section-body'>
                        <dl>
                            <div nz-row>
                                <dt nz-col [nzSpan]='4'>Description</dt>
                                <dd nz-col [nzSpan]='8'>{{cmpTask.meta.desc | undefined}}</dd>
                                <dt nz-col [nzSpan]='4'>Create time</dt>
                                <dd nz-col [nzSpan]='8'>{{cmpTask.meta.time | date:'yyyy-MM-dd'}}</dd>
                                <dt nz-col [nzSpan]='4'>Data type</dt>
                                <dd nz-col [nzSpan]='8'>{{cmpTask.cmpCfg.keynote.dimension | undefined}}</dd>
                                <dt nz-col [nzSpan]='4'>Author</dt>
                                <dd nz-col [nzSpan]='8'>{{cmpTask.auth.userName | undefined}}</dd>
                                <dt nz-col [nzSpan]='4'>Authorization</dt>
                                <dd nz-col [nzSpan]='8'>{{cmpTask.auth.src | resourceSrc}}</dd>
                                <dt nz-col [nzSpan]='4'>Comparison type</dt>
                                <dd nz-col [nzSpan]='8'>{{cmpTask.cmpCfg.keynote.direction==='x'?'Contrast with each other':'Self contrast'}}</dd>
                                <dt nz-col [nzSpan]='4'>Temporal ranges</dt>
                                <dd nz-col [nzSpan]='8'>{{cmpTask.calcuCfg.stdSrc.temporal.start | date: 'yyyy-MM-dd'}} - {{cmpTask.calcuCfg.stdSrc.temporal.start | date: 'yyyy-MM-dd'}}</dd>
                            </div>
                        </dl>
                        <div *ngIf='cmpTask.calcuCfg.dataSrc === "std" && cmpTask.calcuCfg.stdSrc && cmpTask.calcuCfg.stdSrc.spatial && cmpTask.calcuCfg.stdSrc.spatial.geojson'>
                            <h4>Spatial region</h4>
                            <div style='width: 550px; height: 350px; border: 1px solid #e5e5e5; border-radius: 5px;'>
                                <ogms-region-map [geojson]='cmpTask.calcuCfg.stdSrc.spatial.geojson'></ogms-region-map>
                            </div>
                        </div>
                    </div>
                </div>
                <div id='cmp-rst-detail' style='margin-top: 30px'>
                    <div class='section-header'>
                        <h2><span>Comparison Objects</span></h2>
                    </div>
                    <div class='section-body'>
                        <div *ngFor='let cmpObj of cmpTask.cmpCfg.cmpObjs;let i=index'>
                            <h3 id='cmpObj-{{i}}'>
                                <span>{{i + 1}}. </span>
                                <span>{{cmpObj.meta.name}}</span>
                            </h3>
                            <div style='padding-left: 20px;'>
                                <h4>
                                    Introduction
                                </h4>
                                <dl style='margin-bottom: 10px;'>
                                    <div nz-row>
                                        <dt nz-col [nzSpan]='4'>Data schema</dt>
                                        <dd nz-col [nzSpan]='8'>{{cmpObj.schemaName | undefined}}</dd>
                                        <dt nz-col [nzSpan]='4'>Description</dt>
                                        <dd nz-col [nzSpan]='8'>{{cmpObj.meta.desc | undefined}}</dd>
                                    </div>
                                    <!-- <p style='margin: 10px 0;'>{{cmpObj.meta.desc}}</p> -->
                                </dl>
                                <h4>
                                    Comparison result
                                </h4>
                                <nz-tabset [nzType]='"card"' [nzTabBarExtraTemplate]="tabBarExtraContent">
                                    <nz-tab *ngFor="let dataRefer of cmpObj.dataRefers" (nzSelect)='onTabSelected(cmpObj.id, dataRefer)'>
                                        <ng-template #nzTabHeading>
                                            {{dataRefer.msName}}
                                        </ng-template>
                                        <div>
                                            <div style='margin: 25px 0;'>
                                                Here is ms's introduction: <br>... <br> ... <br> ... <br>
                                            </div>
                                            <div *ngFor='let method of cmpObj.methods; let j=index'>
                                                <!-- <dl style='margin: 10px 0;'>
                                                    <div nz-row>
                                                        <dt nz-col [nzSpan]='4'>Comparison method</dt>
                                                        <dd nz-col [nzSpan]='8'>{{method}}</dd>
                                                    </div>
                                                </dl> -->
                                                <ng-container *ngIf='j!==0'>
                                                    <hr>
                                                </ng-container>
                                                <h5 style='margin: 10px 0;'>Comparison method: {{method}}</h5>
                                                <div *ngIf='method === "TABLE_CHART"'>
                                                    <ng-container *ngIf='dataRefer.cmpResult !== undefined && dataRefer.cmpResult.chart !== undefined && dataRefer.cmpResult.chart.tableSrc !== undefined'>
                                                        <ogms-table [tableSrc]='dataRefer.cmpResult.chart.tableSrc' style='height: 350px; width: 500px'></ogms-table>
                                                    </ng-container>
                                                    <!-- <ogms-table></ogms-table> -->
                                                </div>
                                                <div *ngIf='method === "TABLE_STATISTIC"'>

                                                </div>
                                                <div *ngIf='method === "SHAPEFILE_VISUALIZATION"'>

                                                </div>
                                                <div *ngIf='method === "SHAPEFILE_STATISTIC"'>

                                                </div>
                                                <div *ngIf='method === "SHAPEFILE_INTERPOLATION"'>

                                                </div>
                                                <div *ngIf='method === "ASCII_GRID_VISUALIZATION"'>

                                                </div>
                                                <div *ngIf='method === "ASCII_GRID_STATISTIC"'>

                                                </div>
                                                <div *ngIf='method === "GIF"'>

                                                </div>
                                                <div *ngIf='method === "ASCII_GRID_BATCH_VISUALIZATION"'>
                                                    <div>
                                                        <div class='form-row'>
                                                            Year:
                                                            <nz-select [(ngModel)]="dataRefer.attached.selectedYear" (ngModelChange)='onYearChange($event, dataRefer)' [nzPlaceHolder]='""' [nzAllowClear]="true" style="width: 120px;">
                                                                <nz-option *ngFor="let year of dataRefer.attached.selectedYearOption" [nzLabel]="year" [nzValue]="year">
                                                                </nz-option>
                                                            </nz-select>
                                                        </div>

                                                        <div class='form-row'>
                                                            Style:
                                                            <nz-radio-group [(ngModel)]='dataRefer.attached.selectedStyle' (ngModelChange)='onMapStyleChange($event)'>
                                                                <label nz-radio-button [nzValue]="'SWIPE'">
                                                                                            <span>Swipe</span>
                                                                                        </label>
                                                                <label nz-radio-button [nzValue]="'MIXING'">
                                                                                            <span>Mixing</span>
                                                                                        </label>
                                                            </nz-radio-group>
                                                        </div>

                                                    </div>
                                                    <div style='width: 500px; height: 350px;'>
                                                        <ng-container *ngIf='dataRefer.attached.selectedStyle==="MIXING"'>
                                                            <ogms-ascii-grid [imageLayers]='dataRefer.attached.selectedLayers'></ogms-ascii-grid>
                                                        </ng-container>
                                                        <ng-container *ngIf='dataRefer.attached.selectedStyle==="SWIPE"'>
                                                            <ogms-swipe-map [imageLayers]='dataRefer.attached.selectedLayers'></ogms-swipe-map>
                                                        </ng-container>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </nz-tab>
                                    <!-- <ng-template #tabBarExtraContent>
                                        <button nz-button [nzLoading]='tabsAttached[cmpObj.id].isLoading' [nzType]="'dashed'" [nzShape]="'circle'" (click)='refreshResult(cmpObj.id)'>
                                            <i class="anticon anticon-sync"></i>
                                        </button>
                                    </ng-template> -->
                                </nz-tabset>
                            </div>
                        </div>
                    </div>
                </div>
                <div id='cmp-rst-report' style='margin-top: 30px'>
                    <div class='section-header'>
                        <h2><span>Evaluation</span></h2>
                    </div>
                    <div class='section-body'></div>
                </div>

                <div>
                    <p>ss</p>
                    <p>ss</p>
                    <p>ss</p>
                    <p>ss</p>
                    <p>ss</p>
                    <p>ss</p>
                    <p>ss</p>
                    <p>ss</p>
                    <p>ss</p>
                    <p>ss</p>
                    <p>ss</p>
                    <p>ss</p>
                    <p>ss</p>
                    <p>ss</p>
                    <p>ss</p>
                    <p>ss</p>
                    <p>ss</p>
                    <p>ss</p>
                    <p>ss</p>
                    <p>ss</p>
                    <p>ss</p>
                    <p>ss</p>
                    <p>ss</p>
                    <p>ss</p>
                    <p>ss</p>
                    <p>ss</p>
                    <p>ss</p>
                    <p>ss</p>
                    <p>ss</p>
                </div>
            </div>
            <div nz-col [nzSpan]='4' class='side-content'>
                <div>
                    <hr>
                    <h4>Participators</h4>
                    <div>
                        <ul>
                            <li>
                                <a>
                                    <img class='avatar' src="">
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
                <div>
                    <hr>
                    <h4>Models</h4>
                    <div>
                        <ul>
                            <li *ngFor='let ms of cmpTask.cmpCfg.ms'>
                                <a [routerLink]='["../../geo-models", ms.msId]'>{{ms.msName}}</a>
                            </li>
                        </ul>
                    </div>
                </div>
                <div>
                    <hr>
                    <h4>Solution</h4>
                    <div>
                        <a [routerLink]='["../../solutions", cmpTask.cmpCfg.solutionId]'><span>{{cmpTask.cmpCfg.solutionId}}</span></a>
                    </div>
                </div>

                <div id='separator'></div>

                <div class='side-catalog'>
                    <nz-anchor>
                        <nz-link nzHref="#cmp-rst-basic" nzTitle="Basic Information"></nz-link>
                        <nz-link nzHref="#cmp-rst-detail" nzTitle="Comparison Result">
                            <ng-container *ngFor='let cmpObj of cmpTask.cmpCfg.cmpObjs; let i=index;'>
                                <nz-link nzHref='#cmpObj-{{i}}' nzTitle='{{cmpObj.meta.name}}'></nz-link>
                            </ng-container>
                        </nz-link>
                        <nz-link nzHref="#cmp-rst-report" nzTitle="Result Report">
                            <nz-link nzHref="#API-Anchor" nzTitle="Download"></nz-link>
                        </nz-link>
                    </nz-anchor>
                </div>
            </div>
        </div>
    </div>
</div>
<nz-back-top [nzTarget]='cmpRst'></nz-back-top>