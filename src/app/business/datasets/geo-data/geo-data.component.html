<div class="ogms-responsive-div flex-box-row-nowrap">
    <div class="left">
        <ng-container *ngIf='stdList'>
            <div *ngFor='let std of stdList' (click)='select(std)' class='list-item' [class.selected]='selectedSTD && std._id===selectedSTD._id'>
                {{std.meta.name}}
            </div>
        </ng-container>
    </div>
    <div class="right flex-item-1-1-auto">
        <ng-container *ngIf='selectedSTD'>
            <ng-container *ngIf='selectedSTD.schemaName === "TABLE_RAW"'>
                <section>
                    <div class="section-header flex-box-row-nowrap">
                        <span class='title'>Basic information</span>
                    </div>
                    <div class="section-body">
                        <dl class='ogms-table-info'>
                            <div nz-row>
                                <dt nz-col nzSpan='4'>Start</dt>
                                <dd nz-col nzSpan='8'>{{selectedSTD.content.temporal.start | date:'yyyy-MM-dd'}}</dd>
                                <dt nz-col nzSpan='4'>End</dt>
                                <dd nz-col nzSpan='8'>{{selectedSTD.content.temporal.end | date:'yyyy-MM-dd'}}</dd>
                                <dt nz-col nzSpan='4'>Time scale</dt>
                                <dd nz-col nzSpan='8'>{{selectedSTD.content.temporal.scale}}</dd>
                                <dt nz-col nzSpan='4'>Spatial resolution</dt>
                                <dd nz-col nzSpan='8'>
                                    {{selectedSTD.content.spatial.rows}} * {{selectedSTD.content.spatial.cols}}
                                </dd>
                                <dt nz-col nzSpan='4'>Features</dt>
                                <dd nz-col nzSpan='20'>
                                    <nz-tag [nzColor]="'purple'" *ngFor='let feature of selectedSTD.content.features'>
                                        {{feature}}
                                    </nz-tag>
                                </dd>
                            </div>
                        </dl>
                    </div>
                </section>
                <section>
                    <div class="section-header flex-box-row-nowrap">
                        <span class='title'>Select a position to preview</span>
                    </div>
                    <div class="section-body">
                        <div class='ogms-form-item' nz-row>
                            <span nz-col nzSpan='4'>Select position by</span>
                            <div nz-col nzSpan='20'>
                                <nz-radio-group [(ngModel)]="previewCfg.method" [nzSize]="'large'" (ngModelChange)='onPreviewMethodChange()'>
                                    <label nz-radio [nzValue]="'map'">Map</label>
                                    <label nz-radio [nzValue]="'lat&long'">Latitude and Longitude</label>
                                    <label nz-radio [nzValue]="'row&col'">Row and Column</label>
                                </nz-radio-group>
                            </div>
                        </div>
                        <div class='ogms-form-item flex-box-row-nowrap'>
                            <ng-container *ngIf='previewCfg.method === "lat&long"'>
                                <div>
                                    <span>Latitude&nbsp;&nbsp;</span>
                                    <input nz-input [(ngModel)]='previewCfg.lat'>
                                </div>
                                <div>
                                    <span>Longitude&nbsp;&nbsp;</span>
                                    <input nz-input [(ngModel)]='previewCfg.long'>
                                </div>
                            </ng-container>
                            <ng-container *ngIf='previewCfg.method === "row&col"'>
                                <div>
                                    <span>Row&nbsp;&nbsp;</span>
                                    <input nz-input [(ngModel)]='previewCfg.row'>
                                </div>
                                <div>
                                    <span>Column&nbsp;&nbsp;</span>
                                    <input nz-input [(ngModel)]='previewCfg.col'>
                                </div>
                            </ng-container>
                            <ng-container *ngIf='previewCfg.method === "map"'>
                                <div class='map-container'>
                                    <ogms-draw-feature [featureType]='"point"' (onDrawFinished)='onDrawFinished($event, "preview")'></ogms-draw-feature>
                                </div>
                            </ng-container>
                        </div>
                        <button class='action-btn' [nzLoading]='isPreviewBtnLoading' nz-button (click)='preview()'>Preview</button>
                    </div>
                </section>
                <section>
                    <div class="section-header flex-box-row-nowrap">
                        <span class='title'>Download region data</span>
                    </div>
                    <div class="section-body">
                        <div class='ogms-form-item' nz-row>
                            <span nz-col nzSpan='4'>Select region by</span>
                            <div nz-col nzSpan='20'>
                                <nz-radio-group [(ngModel)]="downloadCfg.method" [nzSize]="'large'" (ngModelChange)='onPreviewMethodChange()'>
                                    <label nz-radio [nzValue]="'map'">Map</label>
                                    <label nz-radio [nzValue]="'lat&long'">Latitude and Longitude</label>
                                    <label nz-radio [nzValue]="'row&col'">Row and Column</label>
                                </nz-radio-group>
                            </div>
                        </div>
                        <ng-container *ngIf='downloadCfg.method === "map"'>
                            <div class='ogms-form-item flex-box-row-nowrap'>
                                <div class='map-container'>
                                    <ogms-draw-feature [featureType]='"polygon"' (onDrawFinished)='onDrawFinished($event, "download")'></ogms-draw-feature>
                                </div>
                            </div>
                        </ng-container>
                        <ng-container *ngIf='downloadCfg.method === "lat&long"'>
                            <div class='ogms-form-item flex-box-row-nowrap'>
                                <div>
                                    <span>Start latitude&nbsp;&nbsp;</span>
                                    <input nz-input [(ngModel)]='downloadCfg.startLat'>
                                </div>
                                <div>
                                    <span>End latitude&nbsp;&nbsp;</span>
                                    <input nz-input [(ngModel)]='downloadCfg.endLat'>
                                </div>
                            </div>
                            <div class='ogms-form-item flex-box-row-nowrap'>
                                <div>
                                    <span>Start longitude&nbsp;&nbsp;</span>
                                    <input nz-input [(ngModel)]='downloadCfg.startLong'>
                                </div>
                                <div>
                                    <span>End longitude&nbsp;&nbsp;</span>
                                    <input nz-input [(ngModel)]='downloadCfg.endLong'>
                                </div>
                            </div>
                        </ng-container>
                        <ng-container *ngIf='downloadCfg.method === "row&col"'>
                            <div class='ogms-form-item flex-box-row-nowrap'>
                                <div>
                                    <span>Start row&nbsp;&nbsp;</span>
                                    <input nz-input [(ngModel)]='downloadCfg.startRow'>
                                </div>
                                <div>
                                    <span>End row&nbsp;&nbsp;</span>
                                    <input nz-input [(ngModel)]='downloadCfg.endRow'>
                                </div>
                            </div>
                            <div class='ogms-form-item flex-box-row-nowrap'>
                                <div>
                                    <span>Start column&nbsp;&nbsp;</span>
                                    <input nz-input [(ngModel)]='downloadCfg.startCol'>
                                </div>
                                <div>
                                    <span>End column&nbsp;&nbsp;</span>
                                    <input nz-input [(ngModel)]='downloadCfg.endCol'>
                                </div>
                            </div>
                        </ng-container>
                        <button class='action-btn' [nzLoading]='isDownloadBtnLoading' nz-button (click)='download()'>Download</button>
                    </div>
                </section>
            </ng-container>
        </ng-container>
    </div>
</div>

<nz-modal [(nzVisible)]="_isVisible" [nzTitle]="modalTitle" [nzContent]="modalContent" (nzOnCancel)="handleCancel()" (nzOnOk)="handleOk()" [nzCancelText]='null' [nzOkText]='"Close"'>
    <ng-container *ngIf='_modalType === "download"'>
        <ng-template #modalTitle>
            Download
        </ng-template>
        <ng-template #modalContent>

        </ng-template>
    </ng-container>
    <ng-container *ngIf='_modalType === "preview"'>
        <ng-template #modalTitle>
            Preview
        </ng-template>
        <ng-template #modalContent>

        </ng-template>
    </ng-container>
</nz-modal>

<ogms-footer></ogms-footer>