<ng-template #loadingTemp>
    <div ogms-loading>
        <mat-spinner></mat-spinner>
    </div>
</ng-template>
<div *ngIf='msRecord else loadingTemp' ogms-rx-box>
    <section class='doc'>
        <div class='doc-title'>{{msRecord.meta.name}}</div>
        <div class='doc-body row'>
            <article class='article col-xs-9 col-sm-9 col-md-9 col-lg-9'>
                <section>
                    <div class='section-header flex-box-row-nowrap'>
                        <span class='title'>Basic information</span>
                        <span class='flex-spacer'></span>
                    </div>
                    <div class='section-body'>
                        <mat-grid-list></mat-grid-list>
                        <dl class='ogms-table-info'>
                            <dt>Author</dt>
                            <dd>{{msRecord.auth.userName | undefined}}</dd>
                            <dt>Authorization</dt>
                            <dd>{{msRecord.auth.src | resourceSrc}}</dd>
                            <dt>Create time</dt>
                            <dd>{{msRecord.meta.time | date:'yyyy-MM-dd'}}</dd>
                            <dt>Status</dt>
                            <dd>
                                <span>
                                    {{ msRecord.state === 'INIT'? 'To configured' : msRecord.state === 'RUNNING'?
                                    'Running' : msRecord.state === 'COULD_START'?
                                    'Ready to start' : msRecord.state === 'START_PENDING'? 'Starting' :
                                    msRecord.state === 'START_FAILED'?
                                    'Invoking failed' : msRecord.state === 'FINISHED_FAILED'? 'Run failed' :
                                    msRecord.state
                                    === 'FINISHED_SUCCEED'? 'Run succeed' : 'Unknown' }}
                                </span>
                            </dd>
                        </dl>
                        <div class='detail-desc'>
                            {{msRecord.meta.desc | description}}
                        </div>
                    </div>
                </section>
                <section>
                    <div class='section-header flex-box-row-nowrap'>
                        <span class='title'>Progress</span>
                        <span class='flex-spacer'></span>
                    </div>
                    <div class='section-body'>
                        <div [style.width]='_width'>
                            <mat-progress-bar [value]="!msRecord.progress? 0: msRecord.progress" mode='determinate'></mat-progress-bar>
                        </div>
                        <!-- msRecord.state === 'FINISHED_SUCCEED'? 'success': msRecord.state === 'FINISHED_FAILED'? 'exception': 'active' -->
                    </div>
                </section>
                <section>
                    <div class='section-header flex-box-row-nowrap'>
                        <span class='title'>Calculation configuration</span>
                        <span class='flex-spacer'></span>
                    </div>
                    <div class='section-body'>
                        <ogms-calcu-result [msr]='msRecord'></ogms-calcu-result>
                    </div>
                </section>
            </article>
            <aside class='sider-content col-xs-3 col-sm-3 col-md-3 col-lg-3'>
                <!-- <section class='sider-item'>
                                    <div class='sider-item-title'>
                                        <span>Solutions</span>
                                    </div>
                                    <div class='sider-item-body'>
                                        
                                    </div>
                                </section> -->
            </aside>
        </div>
    </section>
</div>
